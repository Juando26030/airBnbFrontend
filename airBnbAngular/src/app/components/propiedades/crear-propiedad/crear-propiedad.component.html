<div class="cuerpo">
  <div class="property-container">
    <div class="cont-flecha">
      <div class="material-symbols-outlined boton-home" (click)="goBack()">arrow_back</div>
    </div>

    <h2>Crear Propiedad</h2>
    <div class="cont-formulario">
      <form (ngSubmit)="onSubmit()" #propiedadForm="ngForm">

        <!-- Nombre -->
        <input type="text" name="nombre" placeholder="Nombre" required [(ngModel)]="propiedad.nombre" #nombreInput="ngModel">
        <div *ngIf="nombreInput.invalid && nombreInput.touched" class="error">El nombre es obligatorio.</div>

        <!-- Departamento -->
        <input type="text" name="departamento" placeholder="Departamento" required [(ngModel)]="propiedad.departamento" #departamentoInput="ngModel">
        <div *ngIf="departamentoInput.invalid && departamentoInput.touched" class="error">El departamento es obligatorio.</div>

        <!-- Municipio -->
        <input type="text" name="municipio" placeholder="Municipio" required [(ngModel)]="propiedad.municipio" #municipioInput="ngModel">
        <div *ngIf="municipioInput.invalid && municipioInput.touched" class="error">El municipio es obligatorio.</div>

        <!-- Descripción -->
        <textarea name="descripcion" placeholder="Descripción" required [(ngModel)]="propiedad.descripcion" #descripcionInput="ngModel"></textarea>
        <div *ngIf="descripcionInput.invalid && descripcionInput.touched" class="error">La descripción es obligatoria.</div>

        <!-- Imagenes -->
        <h3>Imágenes</h3>
        <div *ngFor="let url of propiedad.imagenes; let i = index" class="image-input">
          <input type="text" [value]="url" readonly>
          <button type="button" (click)="removeImage(i)">Eliminar</button>
        </div>

        <div class="new-image">
          <input type="text" placeholder="URL Imagen" [(ngModel)]="nuevaImagen" name="nuevaImagen">
          <button type="button" (click)="addImage()">Agregar Imagen</button>
        </div>

        <!-- Valor por Noche -->
        <input type="number" name="valor_noche" placeholder="Valor por Noche" required [(ngModel)]="propiedad.valorNoche" #valorInput="ngModel">
        <div *ngIf="valorInput.invalid && valorInput.touched" class="error">El valor es obligatorio.</div>

        <!-- Personas, Habitaciones, Baños -->
        <input type="number" name="cantPersonas" placeholder="Personas" required [(ngModel)]="propiedad.cantPersonas" #personasInput="ngModel">
        <input type="number" name="cantHabitaciones" placeholder="Habitaciones" required [(ngModel)]="propiedad.cantHabitaciones" #habitacionesInput="ngModel">
        <input type="number" name="cantBanos" placeholder="Baños" required [(ngModel)]="propiedad.cantBanos" #banosInput="ngModel">

        <!-- Tipo de Ingreso -->
        <input type="text" name="tipo_de_ingreso" placeholder="Tipo de Ingreso" required [(ngModel)]="propiedad.tipoDeIngreso" #tipoIngresoInput="ngModel">
        <div *ngIf="tipoIngresoInput.invalid && tipoIngresoInput.touched" class="error">El tipo de ingreso es obligatorio.</div>

        <!-- Checkboxes -->
        <div class="checkbox-group">
          <label (click)="toggleCheckbox('visible')">Visible: {{ propiedad.visible ? '✔️' : '❌' }}</label>
          <label (click)="toggleCheckbox('mascotas')">Mascotas: {{ propiedad.mascotas ? '✔️' : '❌' }}</label>
          <label (click)="toggleCheckbox('piscina')">Piscina: {{ propiedad.piscina ? '✔️' : '❌' }}</label>
          <label (click)="toggleCheckbox('asador')">Asador: {{ propiedad.asador ? '✔️' : '❌' }}</label>
        </div>

        <!-- Botón Crear -->
        <button type="submit" [disabled]="!propiedadForm.form.valid">Crear Propiedad</button>
      </form>

      <div *ngIf="errorMsg" class="error-message">{{ errorMsg }}</div>
    </div>
  </div>
</div>
